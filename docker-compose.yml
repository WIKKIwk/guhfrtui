services:
  rfid-go:
    build:
      context: .
      dockerfile: Dockerfile.dev
    image: ${NEW_ERA_GO_IMAGE:-new-era-go:dev}
    container_name: ${NEW_ERA_GO_CONTAINER:-new-era-go-dev}
    network_mode: ${NEW_ERA_GO_NETWORK_MODE:-host}
    stdin_open: true
    tty: true
    working_dir: /workspace/new_era_go
    environment:
      BOT_ENV_FILE: /workspace/new_era_go/.env
      BOT_SHOW_TUI: "0"
      BOT_AUTOSTART: "1"
      GOCACHE: /workspace/.cache/new-era-go/gocache
      GOMODCACHE: /workspace/.cache/new-era-go/gomod
      TZ: ${TZ:-UTC}
    volumes:
      - .:/workspace/new_era_go
      - ./.cache:/workspace/.cache
    command:
      - bash
      - -lc
      - |
        set -euo pipefail
        mkdir -p /workspace/.cache/new-era-go/gocache /workspace/.cache/new-era-go/gomod
        exec sleep infinity
    restart: unless-stopped
